// mochitto
// 6. 2. 2011
INCLUDE "Include\packets\BuyListItem.l2c"

CLASS BuyList NULL

	VAR_START

		PUBLIC ARRAYLIST ITEM_LIST
		
		PUBLIC INT MONEY
		PUBLIC INT LIST_ID
		PRIVATE INT LIST_SIZE
	

	VAR_END
	
	PUBLIC READ 1 BUFF
		BUFF.READ_BYTE NULL
		BUFF.READ_INT16 NULL
		
		BUFF.READ_INT32 NULL
		BUFF.READ_INT64 THIS.MONEY
		
		BUFF.READ_INT32 THIS.LIST_ID
		BUFF.READ_INT16 THIS.LIST_SIZE
		
		FOR A 0 "<&THIS.LIST_SIZE&>" 1
			DEFINE BuyListItem ITEM
			
			BUFF.READ_INT32 ITEM.ID
			BUFF.READ_INT32 NULL
			BUFF.READ_INT32 NULL
			
			BUFF.READ_INT64 ITEM.COUNT
			BUFF.READ_INT16 NULL 
			BUFF.READ_INT16 NULL
			BUFF.READ_INT16 NULL
			BUFF.READ_INT32 NULL
			BUFF.READ_INT16 NULL
			BUFF.READ_INT16 NULL
			BUFF.READ_INT32 NULL
			BUFF.READ_INT32 NULL
			BUFF.READ_INT32 NULL
			BUFF.READ_INT16 NULL
			BUFF.READ_INT16 NULL
			FOR B 0 6 1
				BUFF.READ_INT16 NULL
			NEXT
			BUFF.READ_INT16 NULL
			BUFF.READ_INT16 NULL
			BUFF.READ_INT16 NULL
			BUFF.READ_INT64 ITEM.PRICE
			
			THIS.ITEM_LIST.ADD ITEM
			DELETE ITEM	
		NEXT 
		/*		
		writeD(0x00);
		writeQ(_money);		// current money
		writeD(_listId);
		
		writeH(_list.size());
		
		for (L2TradeItem item : _list)
		{
			if (item.getCurrentCount() > 0 || !item.hasLimitedStock())
			{
				writeD(item.getItemId());
				writeD(item.getItemId());
				writeD(0);
				writeQ(item.getCurrentCount() < 0 ? 0 : item.getCurrentCount());
				writeH(item.getTemplate().getType2());
				writeH(item.getTemplate().getType1());	// Custom Type 1
				writeH(0x00);	// isEquipped
				writeD(item.getTemplate().getBodyPart());	// Body Part
				writeH(0x00);	// Enchant
				writeH(0x00);	// Custom Type
				writeD(0x00);	// Augment
				writeD(-1);		// Mana
				writeD(-9999);	// Time
				writeH(0x00);	// Element Type
				writeH(0x00);	// Element Power
				for (byte i = 0; i < 6; i++)
				{
					writeH(0x00);
				}
				// Enchant Effects
				writeH(0x00);
				writeH(0x00);
				writeH(0x00);
				
				if (item.getItemId() >= 3960 && item.getItemId() <= 4026)// Config.RATE_SIEGE_GUARDS_PRICE-//'
					writeQ((long) (item.getPrice() * Config.RATE_SIEGE_GUARDS_PRICE * (1 + _taxRate)));
				else
					writeQ((long) (item.getPrice() * (1 + _taxRate)));
			}
			2:36:05 :[SERVER DUMP: 
			07 
			A4 79 99 02 00 00 00 00 
			57 1E 05 00 
			24 00 
			01 00 00 00	00 00 
			F6 1A 00 00 00 00 00 00 00 00 00 00 01 00 00 00 00 01 00 00 00 00 00 00 00 00 78 3C 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 AC 18 00 00 00 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 68 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 25 07 00 00 05 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 58 02 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 E2 16 00 00 03 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 D4 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 31 14 00 00 0A 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 68 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 D4 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 10 A4 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 D5 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 10 A4 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 A0 1D 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 27 09 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 10 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 D8 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 17 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 D0 02 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 18 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 A0 05 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 1A 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 A0 05 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 09 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 2C 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 0B 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 D4 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 0B 1E 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 D4 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 23 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 12 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 24 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 12 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 25 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 12 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 26 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 12 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 27 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 12 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 28 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 12 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 29 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 C0 12 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 5A 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 5B 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 5C 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 5D 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 5E 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 5F 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 60 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 61 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 62 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 63 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 64 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 65 1B 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 F0 87 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 CA 21 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 80 0D 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 C4 21 00 00 01 00 00 00 00 00 00 00 05 00 00 00 00 00 00 00 00 00 00 00 00 00 B8 0B 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
		}
		*/
	RETURN THIS.ITEM_LIST
	
	PUBLIC READ_GPLUS 1 BUFF
		
		BUFF.RESET_INDEX
		
		BUFF.READ_BYTE NULL	
		BUFF.READ_INT16 NULL
		BUFF.READ_INT64 THIS.MONEY
		
		BUFF.READ_INT32 THIS.LIST_ID
		BUFF.READ_INT16 THIS.LIST_SIZE
		
		FOR A 0 "<&THIS.LIST_SIZE&>" 1
			DEFINE BuyListItem ITEM
			
			BUFF.READ_INT16 NULL
			BUFF.READ_INT32 NULL
			BUFF.READ_INT32 ITEM.ITEM_ID
			BUFF.READ_INT64 ITEM.COUNT
			 
			BUFF.READ_INT16 NULL
			BUFF.READ_INT16 NULL
			
			BUFF.READ_INT32 NULL
			BUFF.READ_INT16 NULL
			BUFF.READ_INT16 NULL
			BUFF.READ_INT16 NULL
			BUFF.READ_INT64 ITEM.PRICE
			
			FOR B 0 8 1
				BUFF.READ_INT16 NULL
			NEXT
			
			BUFF.READ_INT16 NULL
			BUFF.READ_INT16 NULL
			BUFF.READ_INT16 NULL

			THIS.ITEM_LIST.ADD ITEM
			DELETE ITEM	
		NEXT 
	RETURN THIS.ITEM_LIST

END_CLASS 